<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Vocabulaire Interactif - Master Player</title>
    <style>
        :root { --primary: #3498db; --success: #2ecc71; --danger: #e74c3c; --bg: #121212; --card: #1e1e1e; --accent: #f1c40f; }
        body { background-color: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; }
        #container { width: 95%; max-width: 1100px; margin: 40px auto; text-align: center; }
        
        /* Dropdown Styling */
        .selector-container { background: var(--card); padding: 20px; border-radius: 12px; margin-bottom: 30px; border: 1px solid #333; }
        select { padding: 12px; background: #333; color: white; border-radius: 6px; border: 1px solid var(--primary); font-size: 16px; width: 300px; cursor: pointer; }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .set-card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #333; transition: 0.3s; }
        .set-card:hover { border-color: var(--primary); }
        
        .btn { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-size: 15px; width: 100%; margin-bottom: 8px; transition: 0.3s; }
        .btn-edit { background: #444; }
        .btn:hover { filter: brightness(1.2); }

        .screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 100; justify-content: center; align-items: center; flex-direction: column; }
        #modal { background: rgba(0,0,0,0.85); }
        .modal-content { background: #222; padding: 25px; border-radius: 15px; width: 90%; max-width: 600px; }

        .edit-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .edit-table input { background: #333; color: white; border: 1px solid #555; padding: 5px; width: 95%; border-radius: 4px; }
        .scroll-area { max-height: 400px; overflow-y: auto; border: 1px solid #333; }

        #word-display { font-size: 80px; font-weight: bold; margin: 40px 0; color: var(--accent); text-shadow: 2px 2px 10px rgba(0,0,0,0.5); padding: 0 20px; }
        #timer-container { width: 70%; height: 12px; background: #333; border-radius: 6px; margin: 20px auto; overflow: hidden; }
        #timer-bar { width: 100%; height: 100%; background: var(--success); transition: width 1s linear; }

        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid #444; text-align: left; }
        th { background: #333; }
    </style>
</head>
<body>

<div id="container">
    <h1>Vocabulaire Interactif</h1>
    
    <div class="selector-container">
        <label style="display:block; margin-bottom:10px; color:#aaa;">Kies een hoofdstuk:</label>
        <select id="thema-select" onchange="laadThema(this.value)">
            <option value="ecologie">L'Environnement et l'√âcologie</option>
            <option value="mobilite">La Mobilit√© et le Transport</option>
            <option value="pelckmans">Grote Woordenlijst (Pelckmans)</option>
        </select>
    </div>

    <div class="grid" id="set-grid"></div>
</div>

<div id="modal" class="screen" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <h2 id="modal-title" style="color: var(--primary);">Modifier</h2>
        <div class="scroll-area">
            <table class="edit-table">
                <thead><tr><th>NL</th><th>FR</th></tr></thead>
                <tbody id="edit-tbody"></tbody>
            </table>
        </div>
        <button class="btn" style="background:var(--success); margin-top:15px;" onclick="saveAndClose()">Opslaan & Sluiten</button>
    </div>
</div>

<div id="exercise" class="screen">
    <div id="info-fr" style="font-size: 1.2rem; color: #aaa;"></div>
    <div id="timer-container"><div id="timer-bar"></div></div>
    <div id="word-display">Laden...</div>
    <div style="display:flex; gap:10px;">
        <button class="btn" style="width:140px; background:#555;" id="pause-btn" onclick="togglePause()">Pause</button>
        <button class="btn" style="width:140px; background:var(--danger);" onclick="location.reload()">Stoppen</button>
    </div>
</div>

<div id="result" class="screen">
    <h2 style="color: var(--success);">Overzicht van deze set</h2>
    <div style="width: 80%; max-height: 70vh; overflow-y: auto; background: #1e1e1e; padding: 10px; border-radius: 10px;">
        <table>
            <thead><tr><th>Nederlands</th><th>Fran√ßais</th></tr></thead>
            <tbody id="res-body"></tbody>
        </table>
    </div>
    <button class="btn" style="margin-top: 20px; width:250px; background:var(--primary);" onclick="location.reload()">Terug naar Menu</button>
</div>

<script>
const dataBibliotheek = {
    "ecologie": {
        "titel": "L'Environnement et l'√âcologie",
        "woorden": [
            {"fr": "la protection de l'environnement", "nl": "de bescherming van het milieu"}, {"fr": "sauver le climat", "nl": "het klimaat redden"}, {"fr": "le respect de la nature", "nl": "het respect voor de natuur"}, {"fr": "pr√©server les √©cosyst√®mes", "nl": "de ecosystemen beschermen"}, {"fr": "le d√©veloppement durable", "nl": "de duurzame ontwikkeling"}, {"fr": "l'√©conomie verte", "nl": "de groene economie"}, {"fr": "le recyclage", "nl": "het recycleren"}, {"fr": "trier les d√©chets", "nl": "het afval sorteren"}, {"fr": "le z√©ro d√©chet", "nl": "zero waste"}, {"fr": "biod√©gradable", "nl": "biologisch afbreekbaar"}, {"fr": "le changement climatique", "nl": "de klimaatverandering"}, {"fr": "la d√©forestation", "nl": "de ontbossing"}, {"fr": "toxique", "nl": "giftig"}, {"fr": "le r√©chauffement climatique", "nl": "de opwarming van de aarde"}, {"fr": "la canicule", "nl": "de hittegolf"}, {"fr": "la pollution atmosph√©rique", "nl": "de luchtvervuiling"}, {"fr": "les particules fines", "nl": "het fijn stof"}, {"fr": "les √©missions de CO2", "nl": "de CO2 uitstoot"}, {"fr": "l'√©nergie renouvelable", "nl": "de hernieuwbare energie"}, {"fr": "une inondation", "nl": "een overstroming"}, {"fr": "une temp√™te", "nl": "een storm"}, {"fr": "un incendie", "nl": "een brand"}, {"fr": "installer des panneaux solaires", "nl": "zonnepanelen installeren"}, {"fr": "investir dans des √©oliennes", "nl": "windmolens"}, {"fr": "faire du covoiturage", "nl": "carpoolen"}
        ]
    },
    "mobilite": {
        "titel": "La Mobilit√© et le Transport",
        "woorden": [
            {"fr": "se d√©placer", "nl": "zich verplaatsen"}, {"fr": "un moyen de transport", "nl": "een vervoermiddel"}, {"fr": "le transport en commun", "nl": "openbaar vervoer"}, {"fr": "la piste cyclable", "nl": "het fietspad"}, {"fr": "la trottinette √©lectrique", "nl": "de elektrische step"}, {"fr": "le passage pour pi√©tons", "nl": "het zebrapad"}, {"fr": "la borne de recharge", "nl": "de laadpaal"}, {"fr": "le covoiturage", "nl": "het carpoolen"}, {"fr": "le permis de conduire", "nl": "het rijbewijs"}, {"fr": "les embouteillages", "nl": "de files"}, {"fr": "la mobilit√© durable", "nl": "duurzame mobiliteit"}, {"fr": "la s√©curit√© routi√®re", "nl": "verkeersveiligheid"}, {"fr": "limiter la vitesse", "nl": "snelheid beperken"}, {"fr": "le code de la route", "nl": "verkeersreglement"}, {"fr": "le retard", "nl": "de vertraging"}, {"fr": "la correspondance", "nl": "de aansluiting"}, {"fr": "changer de train", "nl": "overstappen"}, {"fr": "d√©coller", "nl": "opstijgen"}, {"fr": "atterrir", "nl": "landen"}, {"fr": "faire le plein", "nl": "tanken"}, {"fr": "le rond-point", "nl": "het rondpunt"}, {"fr": "les travaux routiers", "nl": "wegenwerken"}, {"fr": "faire la navette", "nl": "pendelen"}, {"fr": "le pare-brise", "nl": "de voorruit"}, {"fr": "un usager faible", "nl": "een zwakke weggebruiker"}
        ]
    },
    "pelckmans": {
        "titel": "Grote Woordenlijst (Pelckmans)",
        "woorden": [
            {"fr": "l'offre exceptionnelle", "nl": "de uitzonderlijke aanbieding"}, {"fr": "ajouter au panier", "nl": "aan het winkelmandje toevoegen"}, {"fr": "l'arriv√©e", "nl": "de aankomst"}, {"fr": "faire la queue", "nl": "aanschuiven"}, {"fr": "l'abonnement", "nl": "het abonnement"}, {"fr": "activer", "nl": "activeren"}, {"fr": "le montant", "nl": "het bedrag"}, {"fr": "sauvegarder", "nl": "bewaren/opslaan"}, {"fr": "commander", "nl": "bestellen"}, {"fr": "le paiement", "nl": "de betaling"}, {"fr": "le budget", "nl": "het budget"}, {"fr": "le cadeau", "nl": "het cadeau"}, {"fr": "num√©rique", "nl": "digitaal"}, {"fr": "t√©l√©charger", "nl": "downloaden"}, {"fr": "efficace", "nl": "effici√´nt"}, {"fr": "l'√©v√®nement", "nl": "het evenement"}, {"fr": "f√©licitations", "nl": "gefeliciteerd"}, {"fr": "gratuit", "nl": "gratis"}, {"fr": "r√©utilisable", "nl": "herbruikbaar"}, {"fr": "la fronti√®re", "nl": "de grens"}, {"fr": "la capitale", "nl": "de hoofdstad"}, {"fr": "l'information", "nl": "de informatie"}, {"fr": "la valise", "nl": "de koffer"}, {"fr": "la r√©duction", "nl": "de korting"}, {"fr": "le lien", "nl": "de link"}, {"fr": "le mot de passe", "nl": "het paswoord"}, {"fr": "recycler", "nl": "recycleren"}, {"fr": "la r√©servation", "nl": "de reservatie"}, {"fr": "respecter", "nl": "respecteren"}, {"fr": "gaspiller", "nl": "verspillen"}, {"fr": "polluer", "nl": "vervuilen"}, {"fr": "le tour du monde", "nl": "de wereldreis"}, {"fr": "se connecter", "nl": "zich aanmelden"}, {"fr": "allumer zijn gsm", "nl": "zijn gsm aanzetten"}
        ]
    }
};

let allSets = [];
let currentSetIdx = 0, wordIdx = 0, timeLeft = 8, isPaused = false, interval;

function laadThema(themaKey) {
    const thema = dataBibliotheek[themaKey];
    document.querySelector('h1').innerText = thema.titel;
    const woorden = thema.woorden;
    allSets = [];
    
    // Dynamische sets van 14 met overlap van 9
    for (let i = 0; i < 10; i++) {
        let start = i * 9;
        let set = woorden.slice(start, start + 14);
        if (set.length > 5) allSets.push(set); 
    }
    renderMenu();
}

function renderMenu() {
    const grid = document.getElementById('set-grid');
    grid.innerHTML = '';
    allSets.forEach((set, i) => {
        const card = document.createElement('div');
        card.className = 'set-card';
        card.innerHTML = `
            <h3 style="margin-top:0;">S√©rie ${i+1}</h3>
            <p style="color:#888; font-size:13px;">${set.length} woorden</p>
            <button class="btn" onclick="startSet(${i})">üöÄ Starten</button>
            <button class="btn btn-edit" onclick="openEditor(${i})">‚öô Bewerken</button>
        `;
        grid.appendChild(card);
    });
}

function openEditor(idx) {
    currentSetIdx = idx;
    const tbody = document.getElementById('edit-tbody');
    document.getElementById('modal-title').innerText = `Serie ${idx+1} aanpassen`;
    tbody.innerHTML = allSets[idx].map((w, i) => `
        <tr>
            <td><input type="text" value="${w.nl}" onchange="updateWord(${i}, 'nl', this.value)"></td>
            <td><input type="text" value="${w.fr}" onchange="updateWord(${i}, 'fr', this.value)"></td>
        </tr>
    `).join('');
    document.getElementById('modal').style.display = 'flex';
}

function updateWord(wIdx, lang, val) { allSets[currentSetIdx][wIdx][lang] = val; }
function saveAndClose() { document.getElementById('modal').style.display = 'none'; }
function closeModal(e) { if(e.target.id === 'modal') document.getElementById('modal').style.display = 'none'; }

function startSet(idx) {
    currentSetIdx = idx; wordIdx = 0;
    document.getElementById('container').style.display = 'none';
    document.getElementById('exercise').style.display = 'flex';
    nextWord();
}

function nextWord() {
    const set = allSets[currentSetIdx];
    if (wordIdx >= set.length) { showResults(); return; }
    timeLeft = 8; updateTimerBar();
    document.getElementById('word-display').innerText = set[wordIdx].nl;
    document.getElementById('info-fr').innerText = `Serie ${currentSetIdx+1} - Woord ${wordIdx+1} / ${set.length}`;

    if (interval) clearInterval(interval);
    interval = setInterval(() => {
        if (!isPaused) {
            timeLeft--; updateTimerBar();
            if (timeLeft <= 0) { wordIdx++; nextWord(); }
        }
    }, 1000);
}

function updateTimerBar() {
    const bar = document.getElementById('timer-bar');
    bar.style.width = (timeLeft / 8 * 100) + '%';
    bar.style.backgroundColor = timeLeft < 3 ? 'var(--danger)' : 'var(--success)';
}

function togglePause() {
    isPaused = !isPaused;
    document.getElementById('pause-btn').innerText = isPaused ? "Hervatten" : "Pause";
}

function showResults() {
    clearInterval(interval);
    document.getElementById('exercise').style.display = 'none';
    document.getElementById('result').style.display = 'flex';
    document.getElementById('res-body').innerHTML = allSets[currentSetIdx].map(w => `
        <tr><td>${w.nl}</td><td style="color:var(--primary); font-weight:bold;">${w.fr}</td></tr>
    `).join('');
}

window.onload = () => laadThema('ecologie');
</script>

</body>
</html>
